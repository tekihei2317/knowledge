# isucon11感想戦

[ISUCON 11 予選感想雑談会【#licoding】 - YouTube](https://www.youtube.com/watch?v=haFSLvTdy6s)

## どういう順番で改善していったか

- ツールの導入
  - alp
  - pt-query-digest
- インデックスの追加は最初のほうにやる
  - 初手index

## エンドポイントについて

- 僕はずっと`GET /api/isu`をやっていた
  - N+1改善したけどスコアが1000から伸びなかった
  - 伸びない原因があったのかな
  - ドロップ率?ってなんだっけ
- ミドルウェアの改善のみで9000点くらいまで伸びるみたい
- N+1を改善してもスコアが伸びないこともあるみたい
- `GET /api/condition/:uuid`にいっぱいリクエストが飛んでいた
  - 499めっちゃ返ってたのなんでだったんだろう

## そのほかの改善

- 画像をDBに保存するのではなくNginxで返す
  - そういえばバイナリで入ってたなぁ
- 複数台構成
  - joinするならDBを2台に分けられない
  - リソース使い切ってるかってどうやって判定するんだろう
- キャッシュ
  - eタグって何...?
- グラフのスコア
  - 難しかったらしい
