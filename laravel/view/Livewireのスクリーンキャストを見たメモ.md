# Livewireのスクリーンキャストを見たメモ（Part 1）

[Livewire Screencasts | Laravel Livewire](https://laravel-livewire.com/screencasts/installation)のGetting Startedを見たのでメモします。

## データバインディング

- Ajaxリクエストでバックエンドとフロントエンドを同期している
- debounce
  - 入力をやめてからAajaxリクエストが送られるまでの待機時間
- lazy
  - フォーカスが外れたときにリクエストが送られる
  - Vueにもあるらしい(使ったことなかった)
- input、select、checkbox等にもバインディング出来る

## アクション

- ブラウザのイベントに応じてサーバーサイドで関数を実行できる
- `$set`メソッドでプロパティに代入することも出来る

## ライフサイクルフック

- `mount`の引数でDI出来る
  - `Illuminate\Http\Request`でHTTPリクエストの情報を取得できる→コントローラーのような使い方も出来る
  - `mount`以外のメソッドでもDI出来る
- `mount`にプロパティを渡すことが出来る
  - コンポーネントを入れ子にする場合は、これをpropsのように用いて振る舞いを変える
- `hydrate`フック
  - 初回のリクエストは`mount`フックで、それ以外のAjaxリクエストは`hydrate`フックが使える
- `updated`フック
  - publicプロパティが更新された後に実行される
  - 特定のプロパティの変更も検知出来る(`updatedName`→`$name`の変更時)
- 感想
  - Vueの`mounted`の代わり→`mount`
  - Vueの`watch`代わり→`updated*`

## コンポーネントの入れ子

- Livewireコンポーネントのviewファイルから別のLivewireコンポーネントを呼べば良い
- propsをどうやって渡すかが気になる
  - コンポーネント呼び出し時に指定して、mountメソッドで受け取る
  - Bladeで使う場合は明示的にpublicプロパティに代入する必要がありそう
- あるコンポーネントが更新されたときのリクエストには、そのコンポーネントの情報しか入っていないみたい
  - コンポーネントがたくさん入れ子になっていたときに、payloadが大きくなるのを防ぐため

## イベント

- `emit`
  - 任意のコンポーネント間で通信できる?
  - `emitUp` → 自分と自分の祖先のみ?
- 仕組み
  - まずイベントを発行したコンポーネント用のリクエストが送られる
  - レスポンスが返ってきたあとに、そのイベントをListenしているそれぞれのコンポーネント用のリクエストが送られる
    - 5個あったら5回送られる(Ajaxなので並列)
- イベントを受け取る側は、イベント名とイベントハンドラの名前が同じ場合はイベントハンドラを省略できる

## 感想

- Vueと似ているので覚えやすいと思った
- デフォルトだとBladeの補完がすこし険しい気がする
  - TypeScriptを使っていないVueと同じくらいかちょっと弱いくらい
  - Bladeで補完を聞かせられれば結構良さそう
