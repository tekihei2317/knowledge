# LaravelでCookieファサードを使うときの注意点

## そもそもCookieとは何か

HTTP通信は状態を保存しないので、状態を保存するために使うもの。HTTPのリクエストヘッダ、レスポンスヘッダでやりとりされる。

Cookieにはドメイン、パス(URLのドメインより後ろの/で区切られたもの)、有効期限などの属性がある。

## ハマったポイント

Laravelの`Cookie::queue()`を実行して、レスポンスが返される前に`Cookie::get()`で取得しようとして取得できなかった。

取得出来なかった理由は、`Cookie::get()`はリクエストヘッダから取得するが、`Cookie::queue()`はレスポンスが返されるときにレスポンスヘッダにつけるから。つまり、レスポンスが返却されてから再度リクエストが到達するまでは`Cookie::get()`で取得することは出来ない。

TODO: 図を書く

## 再現してみる

TODO: テストを書く
