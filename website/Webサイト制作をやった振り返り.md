# Webサイト制作をやった振り返り

友人から頼まれてWebサイト制作をしているが、色々反省点があるので記録しておく。

作っているサイトは美容系のサイトで、静的ページ + お知らせ機能のシンプルな構成。普段はVueを使っているので、Vue製の静的サイトジェネレータ[gridsome](https://github.com/gridsome/gridsome)を使って開発している。

最終的に以下のような構成になった。

TODO: 画像を入れる

選定理由は以下の通り。microCMSやVercelを使ってみたかったが、商用だと少し高かったので今回は使わなかった。

| 使用技術         | 選定理由                                                                 |
| ---------------- | ------------------------------------------------------------------------ |
| Gridsome         | Vue製の静的サイトジェネレータで一番メジャーなため。                      |
| WordPress        | マネージドのHeadless CMSが高かったため。<br>レンタルサーバーが安いため。 |
| Firebase Hosting | 無料枠でも商用利用が可能なため。<br>GitHub Actionsとの連携が簡単なため。     |

## 反省点

### 納品することを考えていなかった

最初に何を納品するかを決めていなかった。文言の変更などの小さい変更は自分でやればいいと思っていたが、お客さんは自分たちで変更できることできること求めていた。現状だとHTML & CSS（Vueファイル）がGitHub上にあり、CMS上から文言を修正することはできない。

自分がWebサイト制作を依頼する側になったとして、お金を払って作ってもらったWebサイトが、自分の手の中にないと文句を言うと思う。Webアプリの場合は開発側がソースコードを持つことが多いと思うので、ここがWebアプリ開発との違いだと思った。

## 改善案

HTML & CSSをWordPressにアップロードして、WordPressで完結させる。WordPressはアップロードした静的ファイルをビジュアルエディタで編集できるらしいので（要検証）、文言をお客さんが変更するという要件に対応できる。また、レンタルサーバーのアカウントを作ってもらってそこに構築すれば、簡単に納品することが出来る。

## 学んだこと

### レンタルサーバーが結構良い

WordPressはなぜレンタルサーバーで使うことが多いのはなぜか、VPSやクラウドサーバーではだめなのだろうかと思っていたが、レンタルサーバーには費用や運用しやすさの面で色々メリットがあると学んだ。具体的には以下のような利点がある。

- 安い（ロリポップのスタンダードプランは550円~/月）
- DBのバックアップを簡単にとれる
- SSL対応が簡単に出来る
- メール設定が簡単に出来る
- OSの面倒を見てくれる（セキュリティの問題が起きたときの対応等）
  - PHPやMySQLのバージョンは自分で上げる必要がありそう

調べているとVPSが勉強になりそうだったので、自分で1つ持っておきたいと思った。

### まるっと納品する場合は（ヘッドレスでない）WordPressを避けられない

気がしている。GitHubのリポジトリを共有するわけにはいかないので、ソースコードを納品物に含める必要がある。そうなるとヘッドレスCMSではなく普通のCMSを使う必要があり、普通のCMSから選ぶとなると、一番シェアが多いWordPressが良いということになると思う。

それ以外となると、ノーコード/ローコード系のツールになるかもしれない。

ソースコードを納品しなくてよいけど文言は編集したいという要件の場合は、Headless CMSに色々詰め込んだらできそうだけど、逆に面倒な気がしている。

## 改めてどういう選択肢が良かったか

上のWordPressが避けられない話をCTOにすると、「そもそもすべて納品する訳ではない場合ってどういう場合？」という指摘を受けた。基本的にWebサイト制作は、WordPressで作ってそれを納品するか、HTMLとCSSを納品するというケースがほとんどらしい。

納品した後にコーダーの人が運用・メンテナンスすることもあって、その場合はReactやVueを書いているとメンテナンスしづらくなる。

以上のことを考えると、素のHTML&CSSを書くか、きれいなHTMLとCSSを生成できる範囲でフレームワークを使うの2択になると思った。ただ後者の場合は注意が必要で、納品したHTML&CSSに変更が加えられた後に再度改修する必要がある場合は、最新の変更まで追いつくか、フレームワークをやめて素のHTML&CSSを使う必要がある。

素のHTML&CSSを書くことと、楽しつつきれいなHTML&CSSを生成できる道具を使うことを今後やってみようと思う。
