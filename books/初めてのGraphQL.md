# 初めてのGraphQL

## 5章 GraphQLサーバーの実装

gql``っていうのは何？apolloのメソッド？
トリビアルリゾルバ
  何も書かなければJSのオブジェクトがGraphQLのスキーマにマッピングされるが、オブジェクトに存在しない値の場合は、自分でリゾルバを書く
inputのデフォルト値
  リゾルバで受け取るときにはもう入っている。リクエストで一緒に送られる or サーバー側でリゾルバの前に入れている
クエリのバリデーションはどのタイミングで行われているか
  レスポンスを返すとき
    GraphQLサーバー側で型と一致しているか判定してそう
  リクエストを送るとき
    これもサーバー側で判定している？リクエストを送られているかどうかを見れば分かる
リレーションをどうやって表現するのか?

```graphql
User {
  id: ID!
  name: String!
  postedPhotos: [Photo!]!
}
```

みたいなときは、UserのpostedPhotosリゾルバを、

```js
postedPhotos: (parent) => photos.filter((photo) => photo.userId === parent.id)
```

こんな感じで書く。 これだとユーザー一覧の取得でN+1問題が起きる（毎回写真一覧をループしているため）。
