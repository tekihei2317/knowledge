# inertiaの疑問点と調査結果のメモ

[inertiajs/inertia](https://github.com/inertiajs/inertia)は、BladeやERBを使ったクラシックなSSRアプリケーションと同じような方法で、VueやReactを使ったSPAを作るためのライブラリ。


inertia自体はフロントエンドフレームワークとバックエンドフレームワークを繋ぐ役割をしているため、フロントエンドはReact / Vue / Svelte、バックエンドはLaravel / Railsから選択することが出来る。

### 疑問点

### バリデーションをどのように実装するか？

サーバーサイドで実装する。バリデーションエラーが起きた場合は、レスポンスでエラーメッセージが返却される。フロントエンド側からはリアクティブなプロパティでアクセスできるため、表示する処理だけを書けばよい。

リアルタイムバリデーションを実装する場合は、フロントエンドで別途実装する必要がありそう。

### headにmetaを設定できるのか？

サンプルコード（[ledermann/pingcrm](https://github.com/ledermann/pingcrm/)）は`vue-meta`を使用してタイトルを書き換えていた。「`vue-meta`は表示を変えているだけで実際のheadの中身は変更していない」という記事があったけど、きちんと書き換えられていた。

ただtitleを書き換えるのにJSを使っていると思うので、それがクローラーに評価されるかどうかは分からない。

### 素のVue +  Laravel APIに戻すためには何をすれば良いのか？

変更する必要があるのは大体以下の箇所だと思う。

- APIをJSONを返すように修正する
  - 必要であればバリデーションをフォームリクエストに移す
- クライアントサイドルーティングを定義する
- フロントエンドでAPIにアクセスするレイヤを作成する

細かいところは色々ありそう。Vueの純粋なコンポーネント（Inertiaに依存しているpageコンポーネント以外）と、バックエンドのコントローラーより下のレイヤはそのまま使い回せるので悪くないと思う。

### ホットリロードの速度

`npm run hot`を実行してちょっと変更してみた。サンプルは1秒くらいでホットリロードが完了した。これくらいで開発できるならばかなり快適になる。DockerじゃないのでDockerにしたら遅くなると思う。

### JavaScriptのライブラリ（Element UI等）が使えるか？

多分使える！（適当）

### BladeからVueに@jsonで渡すのと何が違うのか？

## 参考

- [Inertia.js - The Modern Monolith](https://inertiajs.com/)
